<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LEVEL UP: REBOOT | Master MVP</title>
    <style>
        :root {
            --bg-dark: #050508;
            --panel-bg: rgba(15, 25, 40, 0.95);
            --text-main: #ffffff;
            --text-sub: #aaaaaa;
            --border-color: #222222;
            --neon-blue: #00d9ff;
            --neon-gold: #ffcc00;
            --neon-purple: #b53cff;
            --neon-red: #ff3c3c;
            --nav-bg: #0a0a10;
        }

        [data-theme="light"] {
            --bg-dark: #f4f5f7;
            --panel-bg: #ffffff;
            --text-main: #1a1a1a;
            --text-sub: #666666;
            --border-color: #dddddd;
            --neon-blue: #0066cc;
            --neon-gold: #d4a017;
            --neon-purple: #8a2be2;
            --neon-red: #dc3545;
            --nav-bg: #ffffff;
        }

        body {
            background-color: var(--bg-dark); color: var(--text-main);
            font-family: 'Pretendard', sans-serif;
            margin: 0; padding: 0; display: flex; flex-direction: column;
            height: 100vh; overflow: hidden; transition: all 0.3s ease;
        }

        /* ê³µí†µ í—¤ë” */
        header {
            padding: 15px 20px; border-bottom: 1px solid var(--border-color);
            display: flex; justify-content: space-between; align-items: center;
            background: var(--panel-bg);
        }
        .level-badge {
            background: var(--neon-blue); color: #fff; font-weight: bold;
            padding: 4px 10px; border-radius: 4px; font-size: 0.8rem;
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        main { flex-grow: 1; overflow-y: auto; padding: 20px; padding-bottom: 90px; }
        .view-section { display: none; animation: fadeIn 0.3s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .system-card {
            background: var(--panel-bg); border: 1px solid var(--border-color);
            padding: 20px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* --- 1. ìƒíƒœì°½ & í”„ë¡œí•„ --- */
        .profile-box { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .profile-image-container { position: relative; width: 65px; height: 65px; }
        .profile-img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid var(--neon-blue); object-fit: cover; background: #222; }
        .upload-overlay { position: absolute; bottom: -5px; right: -5px; background: var(--neon-blue); width: 26px; height: 26px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 14px; cursor: pointer; border: 2px solid var(--bg-dark); }
        #imageUpload { display: none; }
        
        /* ì¹­í˜¸ (Title) ìŠ¤íƒ€ì¼ */
        .title-badge {
            display: inline-block; padding: 3px 8px; font-size: 0.7rem; font-weight: bold;
            background: linear-gradient(45deg, rgba(181, 60, 255, 0.2), transparent);
            border: 1px solid var(--neon-purple); color: var(--neon-purple); border-radius: 4px; margin-bottom: 5px;
        }

        .stat-summary { text-align: center; margin-bottom: 20px; background: linear-gradient(45deg, rgba(0,217,255,0.05), transparent); padding: 15px; border-radius: 8px; border: 1px solid rgba(0,217,255,0.2); }
        .radar-chart-container { display: flex; justify-content: center; margin: 20px 0; }
        .radar-chart { width: 140px; height: 140px; }
        .radar-polygon { fill: rgba(0, 217, 255, 0.3); stroke: var(--neon-blue); stroke-width: 2; }
        .radar-label { fill: var(--text-sub); font-size: 10.5px; font-weight: bold; }
        .stat-bar-container { margin-top: 15px; }
        .stat-info { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.85rem; }
        .progress-bg { height: 6px; background: #333; border-radius: 10px; overflow: hidden; margin-bottom: 12px; }
        .progress-fill { height: 100%; background: var(--neon-blue); box-shadow: 0 0 10px var(--neon-blue); transition: width 1s; }

        /* --- 4. ë­í‚¹ & ì†Œì…œ (ì¹œêµ¬ì¶”ê°€) --- */
        .social-header { display: flex; gap: 10px; margin-bottom: 15px; }
        .social-tab-btn { flex: 1; padding: 10px; background: transparent; border: 1px solid var(--border-color); color: var(--text-sub); border-radius: 6px; cursor: pointer; font-weight: bold; }
        .social-tab-btn.active { background: rgba(0, 217, 255, 0.1); border-color: var(--neon-blue); color: var(--neon-blue); }

        .rank-tabs { display: flex; gap: 5px; margin-bottom: 15px; overflow-x: auto; padding-bottom: 5px; }
        .rank-tab-btn { white-space: nowrap; padding: 6px 12px; font-size: 0.75rem; background: transparent; border: 1px solid var(--border-color); color: var(--text-sub); border-radius: 4px; cursor: pointer; }
        .rank-tab-btn.active { background: var(--neon-blue); color: #fff; border-color: var(--neon-blue); }

        .user-list { display: flex; flex-direction: column; gap: 10px; }
        .user-card { display: flex; align-items: center; justify-content: space-between; padding: 12px; background: rgba(255,255,255,0.02); border: 1px solid var(--border-color); border-radius: 8px; }
        .user-card.my-rank { border-color: var(--neon-gold); background: rgba(255, 204, 0, 0.05); }
        .user-info { flex-grow: 1; margin-left: 12px; }
        .user-score { font-weight: bold; color: var(--neon-blue); font-size: 1.1rem; text-align: right; margin-right: 15px; }
        
        .btn-friend { padding: 5px 10px; font-size: 0.7rem; font-weight: bold; background: transparent; border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 4px; cursor: pointer; transition: 0.2s; }
        .btn-friend.added { background: var(--neon-blue); color: #fff; }

        /* í•˜ë‹¨ ë‚´ë¹„ (5ê°œ) */
        nav { position: fixed; bottom: 0; width: 100%; height: 70px; background: var(--nav-bg); display: flex; border-top: 1px solid var(--border-color); z-index: 10; }
        .nav-item { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 0.65rem; color: var(--text-sub); cursor: pointer; }
        .nav-item.active { color: var(--neon-blue); }
        .nav-icon { font-size: 1.3rem; margin-bottom: 4px; }

        h2 { font-size: 1.05rem; color: var(--neon-blue); margin-top: 0; letter-spacing: 1px; text-transform: uppercase; }
        .setting-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid var(--border-color); }
        .switch { position: relative; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #ccc; border-radius: 24px; transition: .4s; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: .4s; }
        input:checked + .slider { background: var(--neon-blue); }
        input:checked + .slider:before { transform: translateX(20px); }
    </style>
</head>
<body>

    <header>
        <div id="sys-title" style="font-weight: 800; letter-spacing: 1px;">LEVEL UP: REBOOT</div>
        <div class="level-badge">Lv. 43</div>
    </header>

    <main>
        <section id="status" class="view-section active">
            <div class="profile-box">
                <div class="profile-image-container">
                    <img id="profilePreview" class="profile-img" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23555'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E">
                    <label for="imageUpload" class="upload-overlay">ğŸ“·</label>
                    <input type="file" id="imageUpload" accept="image/*" onchange="loadProfileImage(event)">
                </div>
                <div>
                    <div class="title-badge">ì² í•™í•˜ëŠ” ë§ˆë¼í† ë„ˆ</div>
                    <div style="font-size: 1.1rem; font-weight: bold;">í”Œë ˆì´ì–´ (ë‚˜)</div>
                </div>
            </div>

            <div class="stat-summary">
                <div style="font-size: 0.75rem; color: var(--text-sub);">ì¢…í•© ì „íˆ¬ë ¥ (Total Score)</div>
                <div style="font-size: 2.2rem; font-weight: 900; color: var(--text-main); margin-top: 5px;">194 <span style="font-size: 0.9rem; color: var(--neon-gold);">pts</span></div>
            </div>

            <div class="system-card">
                <h2>Stat Radar</h2>
                <div class="radar-chart-container">
                    <svg class="radar-chart" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="40" fill="none" stroke="var(--border-color)" stroke-width="1"/>
                        <line x1="50" y1="10" x2="50" y2="90" stroke="var(--border-color)" stroke-width="1"/>
                        <line x1="15" y1="70" x2="85" y2="70" stroke="var(--border-color)" stroke-width="1"/>
                        <polygon class="radar-polygon" points="50,18 82,75 25,75" />
                        <text x="50" y="8" class="radar-label" text-anchor="middle">ê·¼ë ¥(82)</text>
                        <text x="85" y="85" class="radar-label" text-anchor="start">ì§€ëŠ¥(67)</text>
                        <text x="15" y="85" class="radar-label" text-anchor="end">ë¯¼ì²©(45)</text>
                    </svg>
                </div>
                
                <div class="stat-bar-container">
                    <div class="stat-info"><span>ê·¼ë ¥ (ì›¨ì´íŠ¸/ëŸ¬ë‹)</span><span style="color:var(--neon-blue)">82</span></div>
                    <div class="progress-bg"><div class="progress-fill" style="width: 82%"></div></div>
                    
                    <div class="stat-info"><span>ì§€ëŠ¥ (ì² í•™/ë…ì„œ)</span><span style="color:var(--neon-blue)">67</span></div>
                    <div class="progress-bg"><div class="progress-fill" style="width: 67%"></div></div>
                    
                    <div class="stat-info"><span>ë¯¼ì²© (ìˆœë°œë ¥)</span><span style="color:var(--neon-blue)">45</span></div>
                    <div class="progress-bg"><div class="progress-fill" style="width: 45%"></div></div>
                </div>
            </div>
        </section>

        <section id="quests" class="view-section">
            <h2>Daily Quests</h2>
            <div class="system-card">
                <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--border-color); padding-bottom:12px; margin-bottom:12px;">
                    <div>
                        <div style="font-size:0.9rem">ğŸƒ í’€ì½”ìŠ¤ ë§ˆë¼í†¤ ëŒ€ë¹„</div>
                        <div style="font-size:0.7rem; color:var(--text-sub)">10km ëŸ¬ë‹ ì™„ë£Œí•˜ê¸°</div>
                    </div>
                    <span style="color:var(--neon-blue); font-size:0.8rem; border:1px solid var(--neon-blue); padding:3px 8px;">ì§„í–‰ì¤‘</span>
                </div>
                <div style="display:flex; justify-content:space-between; align-items:center; opacity:0.5;">
                    <div>
                        <div style="font-size:0.9rem; text-decoration:line-through;">ğŸ“– ê¹Œë®ˆì˜ ì´ë°©ì¸</div>
                        <div style="font-size:0.7rem; color:var(--text-sub)">ì‹¤ì¡´ì£¼ì˜ ì„œì  30p ì™„ë…</div>
                    </div>
                    <span style="color:var(--neon-gold); font-size:0.8rem;">ì™„ë£Œ</span>
                </div>
            </div>
        </section>

        <section id="dungeon" class="view-section">
            <h2>Local Raid</h2>
            <div class="system-card" style="border-color: var(--neon-red); background: rgba(255, 60, 60, 0.05); text-align: center;">
                <h3 style="color: var(--neon-red); margin: 0 0 10px 0;">âš ï¸ ê´‘ì£¼ ë¶êµ¬ ì—°í•© ëŸ¬ë‹ ë˜ì „</h3>
                <p style="font-size: 0.8rem; color: var(--text-sub);">ê·¼ì²˜ì˜ í—Œí„°ë“¤ê³¼ í•©ì‚° 50kmë¥¼ ë‹¬ì„±í•˜ì„¸ìš”.</p>
                <div style="font-size: 0.75rem; margin: 15px 0;">ì°¸ì—¬ ì¸ì›: 4 / 10 ëª…</div>
                <button style="width: 100%; padding: 12px; background: var(--neon-red); border: none; color: white; font-weight: bold; border-radius: 6px;">ì…ì¥í•˜ê¸°</button>
            </div>
        </section>

        <section id="social" class="view-section">
            <div class="social-header">
                <button class="social-tab-btn active" onclick="toggleSocialMode('global', this)">ğŸ† ê¸€ë¡œë²Œ ë­í‚¹</button>
                <button class="social-tab-btn" onclick="toggleSocialMode('friends', this)">ğŸ‘¥ ë‚´ ì¹œêµ¬</button>
            </div>

            <div id="ranking-controls" class="rank-tabs">
                <button class="rank-tab-btn active" onclick="renderUsers('total', this)">ì „ì²´ìŠ¤ì½”ì–´</button>
                <button class="rank-tab-btn" onclick="renderUsers('str', this)">ê·¼ë ¥ìˆœ</button>
                <button class="rank-tab-btn" onclick="renderUsers('int', this)">ì§€ëŠ¥ìˆœ</button>
                <button class="rank-tab-btn" onclick="renderUsers('agi', this)">ë¯¼ì²©ìˆœ</button>
            </div>

            <div class="user-list" id="user-list-container">
                </div>
        </section>

        <section id="settings" class="view-section">
            <h2>System Settings</h2>
            <div class="system-card">
                <div class="setting-row">
                    <span>ë¼ì´íŠ¸ í…Œë§ˆ (Light Mode)</span>
                    <label class="switch"><input type="checkbox" id="theme-toggle" onchange="changeTheme()"><span class="slider"></span></label>
                </div>
                <div class="setting-row">
                    <span>ì‚¼ì„± í—¬ìŠ¤ API ì—°ë™</span>
                    <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
                </div>
                <div class="setting-row">
                    <span>ì¹´ì¹´ì˜¤ë§µ ê¸°ë°˜ ìœ„ì¹˜ í—ˆìš©</span>
                    <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
                </div>
            </div>
            <button style="width: 100%; padding: 12px; background: #222; border: 1px solid var(--border-color); color: var(--neon-red); font-weight: bold; border-radius: 6px;">ë¡œê·¸ì•„ì›ƒ</button>
        </section>
    </main>

    <nav>
        <div class="nav-item active" onclick="switchTab('status', this)">
            <span class="nav-icon">ğŸ‘¤</span><span>ìƒíƒœì°½</span>
        </div>
        <div class="nav-item" onclick="switchTab('quests', this)">
            <span class="nav-icon">ğŸ“œ</span><span>í€˜ìŠ¤íŠ¸</span>
        </div>
        <div class="nav-item" onclick="switchTab('dungeon', this)">
            <span class="nav-icon">âš”ï¸</span><span>ë˜ì „</span>
        </div>
        <div class="nav-item" onclick="switchTab('social', this)">
            <span class="nav-icon">ğŸ†</span><span>ì†Œì…œ</span>
        </div>
        <div class="nav-item" onclick="switchTab('settings', this)">
            <span class="nav-icon">âš™ï¸</span><span>ì„¤ì •</span>
        </div>
    </nav>

    <script>
        // í•˜ë‹¨ íƒ­ ì „í™˜
        function switchTab(tabId, el) {
            document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            el.classList.add('active');
            if(tabId === 'social') renderUsers(currentSortCriteria);
        }

        // í…Œë§ˆ ë° ì´ë¯¸ì§€ ì—…ë¡œë“œ ë¡œì§
        function changeTheme() {
            const isLight = document.getElementById('theme-toggle').checked;
            document.documentElement.setAttribute('data-theme', isLight ? 'light' : '');
            document.getElementById('sys-title').innerText = isLight ? "LEVEL UP: LIGHT" : "LEVEL UP: REBOOT";
        }
        function loadProfileImage(event) {
            const output = document.getElementById('profilePreview');
            if (event.target.files[0]) output.src = URL.createObjectURL(event.target.files[0]);
        }

        // --- ì¹­í˜¸ ë° ì†Œì…œ ë°ì´í„° ì‹œìŠ¤í…œ ---
        let currentSocialMode = 'global'; // 'global' or 'friends'
        let currentSortCriteria = 'total';

        const userData = [
            { id: 1, name: "ê´‘ì£¼_ë§ˆë¼í† ë„ˆ", title: "ë¬´ë“±ì‚° í˜¸ë‘ì´", str: 95, int: 50, agi: 90, total: 235, isMe: false, isFriend: false },
            { id: 2, name: "ê¹Œë®ˆ_ë¦¬ë”", title: "ì‹¤ì¡´ì£¼ì˜ì", str: 30, int: 98, agi: 40, total: 168, isMe: false, isFriend: true },
            { id: 3, name: "í”Œë ˆì´ì–´ (ë‚˜)", title: "ì² í•™í•˜ëŠ” ë§ˆë¼í† ë„ˆ", str: 82, int: 67, agi: 45, total: 194, isMe: true, isFriend: false },
            { id: 4, name: "ê°•ë‚¨ë°”ë²¨íƒ‘", title: "êµ­ê°€ê¶Œë ¥ê¸‰ ê·¼ë ¥", str: 99, int: 40, agi: 50, total: 189, isMe: false, isFriend: false },
            { id: 5, name: "ì¡°ìš©í•œê°œë°œì", title: "ê·¸ë¦¼ì ë³‘ì‚¬", str: 40, int: 85, agi: 60, total: 185, isMe: false, isFriend: true }
        ];

        function toggleSocialMode(mode, btn) {
            currentSocialMode = mode;
            document.querySelectorAll('.social-tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // ì¹œêµ¬ ëª¨ë“œì¼ë•ŒëŠ” ì •ë ¬ ë²„íŠ¼ ìˆ¨ê¹€
            document.getElementById('ranking-controls').style.display = mode === 'global' ? 'flex' : 'none';
            renderUsers(currentSortCriteria);
        }

        function renderUsers(criteria, btn = null) {
            if(btn) {
                currentSortCriteria = criteria;
                document.querySelectorAll('.rank-tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            }

            const container = document.getElementById('user-list-container');
            container.innerHTML = '';

            // í•„í„°ë§ ë° ì •ë ¬
            let displayUsers = [...userData];
            if(currentSocialMode === 'friends') {
                displayUsers = displayUsers.filter(u => u.isFriend);
            }
            displayUsers.sort((a, b) => b[criteria] - a[criteria]);

            if(displayUsers.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:20px; color:#666;">ë“±ë¡ëœ ì¹œêµ¬ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            displayUsers.forEach((user, index) => {
                const card = document.createElement('div');
                card.className = `user-card ${user.isMe ? 'my-rank' : ''}`;
                
                // ìˆœìœ„í‘œì‹œ (ê¸€ë¡œë²Œ ë­í‚¹ì—ì„œë§Œ ë²ˆí˜¸ í‘œì‹œ)
                const rankDisplay = currentSocialMode === 'global' ? `<div style="font-size:1.2rem; font-weight:bold; color:#666; width:20px;">${index+1}</div>` : '';
                
                // ì¹œêµ¬ ë²„íŠ¼ ìƒíƒœ
                let friendBtnHtml = '';
                if(!user.isMe) {
                    if(user.isFriend) {
                        friendBtnHtml = `<button class="btn-friend added" onclick="toggleFriend(${user.id})">ì¹œêµ¬ âœ“</button>`;
                    } else {
                        friendBtnHtml = `<button class="btn-friend" onclick="toggleFriend(${user.id})">ì¹œêµ¬ ì¶”ê°€</button>`;
                    }
                }

                card.innerHTML = `
                    ${rankDisplay}
                    <div class="user-info">
                        <div class="title-badge" style="font-size:0.6rem; padding:2px 5px;">${user.title}</div>
                        <div style="font-size: 0.95rem;">${user.name}</div>
                    </div>
                    <div class="user-score">${user[criteria]}</div>
                    ${friendBtnHtml}
                `;
                container.appendChild(card);
            });
        }

        // ì¹œêµ¬ ì¶”ê°€/ì‚­ì œ ì•¡ì…˜
        function toggleFriend(userId) {
            const user = userData.find(u => u.id === userId);
            if(user) {
                user.isFriend = !user.isFriend;
                renderUsers(currentSortCriteria); // ì¦‰ì‹œ ë¦¬ë Œë”ë§
            }
        }
    </script>
</body>
</html>