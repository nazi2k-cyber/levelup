<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LEVEL UP: REBOOT | Master MVP</title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        :root {
            --bg-dark: #050508;
            --panel-bg: rgba(15, 25, 40, 0.95);
            --text-main: #ffffff;
            --text-sub: #aaaaaa;
            --border-color: #222222;
            --neon-blue: #00d9ff;
            --neon-gold: #ffcc00;
            --neon-purple: #b53cff;
            --neon-red: #ff3c3c;
            --nav-bg: #0a0a10;
        }

        [data-theme="light"] {
            --bg-dark: #f4f5f7;
            --panel-bg: #ffffff;
            --text-main: #1a1a1a;
            --text-sub: #666666;
            --border-color: #dddddd;
            --neon-blue: #0066cc;
            --neon-gold: #d4a017;
            --neon-purple: #8a2be2;
            --neon-red: #dc3545;
            --nav-bg: #ffffff;
        }

        body {
            background-color: var(--bg-dark); color: var(--text-main);
            font-family: 'Pretendard', -apple-system, sans-serif;
            margin: 0; padding: 0; display: flex; flex-direction: column;
            height: 100vh; overflow: hidden; transition: background-color 0.3s, color 0.3s;
        }

        /* í—¤ë” */
        header {
            padding: 15px 20px; border-bottom: 1px solid var(--border-color);
            display: flex; justify-content: space-between; align-items: center;
            background: var(--panel-bg); z-index: 10;
        }
        #sys-title { font-weight: 800; letter-spacing: 1px; font-size: 1.1rem; }
        .level-badge {
            background: var(--neon-blue); color: #fff; font-weight: bold;
            padding: 4px 10px; border-radius: 4px; font-size: 0.8rem;
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        main { flex-grow: 1; overflow-y: auto; padding: 20px; padding-bottom: 90px; }
        .view-section { display: none; animation: fadeIn 0.3s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .system-card {
            background: var(--panel-bg); border: 1px solid var(--border-color);
            padding: 20px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h2 { font-size: 1.05rem; color: var(--neon-blue); margin-top: 0; margin-bottom: 15px; letter-spacing: 1px; text-transform: uppercase; }

        /* --- ìƒíƒœì°½ & í”„ë¡œí•„ --- */
        .profile-box { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .profile-image-container { position: relative; width: 65px; height: 65px; }
        .profile-img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid var(--neon-blue); object-fit: cover; background: #222; }
        .upload-overlay { position: absolute; bottom: -5px; right: -5px; background: var(--neon-blue); width: 26px; height: 26px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 14px; cursor: pointer; border: 2px solid var(--bg-dark); }
        #imageUpload { display: none; }
        .title-badge { display: inline-block; padding: 3px 8px; font-size: 0.7rem; font-weight: bold; background: linear-gradient(45deg, rgba(181, 60, 255, 0.2), transparent); border: 1px solid var(--neon-purple); color: var(--neon-purple); border-radius: 4px; margin-bottom: 5px; }
        .stat-summary { text-align: center; margin-bottom: 20px; background: linear-gradient(45deg, rgba(0,217,255,0.05), transparent); padding: 15px; border-radius: 8px; border: 1px solid rgba(0,217,255,0.2); }

        /* --- ë ˆì´ë” ì°¨íŠ¸ --- */
        .radar-chart-container { display: flex; justify-content: center; margin: 20px 0; }
        .radar-chart { width: 100%; max-width: 180px; height: auto; aspect-ratio: 1/1; }
        .radar-bg-line { fill: none; stroke: var(--border-color); stroke-width: 1; }
        .radar-polygon { fill: rgba(0, 217, 255, 0.25); stroke: var(--neon-blue); stroke-width: 2; transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .radar-point { fill: var(--neon-blue); }
        .radar-label { fill: var(--text-sub); font-size: 9px; font-weight: bold; }
        .radar-value { fill: var(--neon-blue); font-size: 8px; font-weight: bold; }
        
        .stat-info { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.85rem; }
        .progress-bg { height: 6px; background: #333; border-radius: 10px; overflow: hidden; margin-bottom: 12px; }
        .progress-fill { height: 100%; background: var(--neon-blue); box-shadow: 0 0 10px var(--neon-blue); transition: width 1s; width: 0%; }

        /* --- í€˜ìŠ¤íŠ¸ & ë˜ì „ --- */
        .quest-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border-color); }
        .quest-row:last-child { border-bottom: none; }
        .quest-status { border: 1px solid var(--neon-blue); color: var(--neon-blue); font-size: 0.75rem; padding: 4px 8px; border-radius: 4px; }
        .quest-row.done { opacity: 0.5; }
        .quest-row.done .quest-status { background: transparent; border-color: var(--neon-gold); color: var(--neon-gold); }
        
        .dungeon-banner { border: 1px solid var(--neon-red); background: rgba(255, 60, 60, 0.05); text-align: center; animation: pulse 2s infinite; }
        @keyframes pulse { 50% { border-color: rgba(255, 60, 60, 0.3); } }
        .btn-primary { width: 100%; padding: 12px; background: var(--neon-blue); border: none; color: white; font-weight: bold; border-radius: 6px; cursor: pointer; }

        /* --- ë­í‚¹ & ì†Œì…œ --- */
        .social-header { display: flex; gap: 10px; margin-bottom: 15px; }
        .social-tab-btn { flex: 1; padding: 10px; background: transparent; border: 1px solid var(--border-color); color: var(--text-sub); border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .social-tab-btn.active { background: rgba(0, 217, 255, 0.1); border-color: var(--neon-blue); color: var(--neon-blue); }
        .rank-tabs { display: flex; gap: 5px; margin-bottom: 15px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; }
        .rank-tabs::-webkit-scrollbar { display: none; }
        .rank-tab-btn { white-space: nowrap; padding: 6px 12px; font-size: 0.75rem; background: transparent; border: 1px solid var(--border-color); color: var(--text-sub); border-radius: 4px; cursor: pointer; transition: 0.2s; }
        .rank-tab-btn.active { background: var(--neon-blue); color: #fff; border-color: var(--neon-blue); }
        .user-list { display: flex; flex-direction: column; gap: 10px; }
        .user-card { display: flex; align-items: center; justify-content: space-between; padding: 12px; background: rgba(255,255,255,0.02); border: 1px solid var(--border-color); border-radius: 8px; transition: 0.3s; }
        .user-card.my-rank { border-color: var(--neon-gold); background: rgba(255, 204, 0, 0.05); }
        .user-info { flex-grow: 1; margin-left: 12px; }
        .user-score { font-weight: 900; color: var(--neon-blue); font-size: 1.1rem; text-align: right; margin-right: 15px; }
        .btn-friend { padding: 5px 10px; font-size: 0.7rem; font-weight: bold; background: transparent; border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 4px; cursor: pointer; transition: 0.2s; }
        .btn-friend.added { background: var(--neon-blue); color: #fff; }

        /* --- ì„¤ì • --- */
        .setting-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid var(--border-color); font-size: 0.9rem; }
        .setting-row:last-child { border-bottom: none; }
        .switch { position: relative; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #ccc; border-radius: 24px; transition: .4s; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: .4s; }
        input:checked + .slider { background: var(--neon-blue); }
        input:checked + .slider:before { transform: translateX(20px); }

        /* --- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ --- */
        nav { position: fixed; bottom: 0; width: 100%; height: 70px; background: var(--nav-bg); display: flex; border-top: 1px solid var(--border-color); z-index: 10; }
        .nav-item { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 0.65rem; color: var(--text-sub); cursor: pointer; transition: color 0.2s; }
        .nav-item.active { color: var(--neon-blue); }
        .nav-icon { font-size: 1.3rem; margin-bottom: 4px; }
    </style>
</head>
<body>

    <header>
        <div id="sys-title">LEVEL UP: REBOOT</div>
        <div class="level-badge">Lv. 43</div>
    </header>

    <main>
        <section id="status" class="view-section active">
            <div class="profile-box">
                <div class="profile-image-container">
                    <img id="profilePreview" class="profile-img" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23555'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E">
                    <label for="imageUpload" class="upload-overlay">ğŸ“·</label>
                    <input type="file" id="imageUpload" accept="image/*" onchange="loadProfileImage(event)">
                </div>
                <div>
                    <div class="title-badge">ì² í•™í•˜ëŠ” ë§ˆë¼í† ë„ˆ</div>
                    <div style="font-size: 1.2rem; font-weight: bold;">í”Œë ˆì´ì–´ (ë‚˜)</div>
                </div>
            </div>

            <div class="stat-summary">
                <div style="font-size: 0.8rem; color: var(--text-sub);">ì¢…í•© ìŠ¤ì½”ì–´</div>
                <div style="font-size: 2.5rem; font-weight: 900; color: var(--text-main); margin-top: 5px;" id="totalScore">0 <span style="font-size: 1rem; color: var(--neon-gold);">pts</span></div>
            </div>

            <div class="system-card">
                <h2>Stat Radar</h2>
                <div class="radar-chart-container">
                    <svg class="radar-chart" viewBox="0 0 100 100" id="radarSvg">
                        <g id="radarGrid"></g>
                        <g id="radarAxes"></g>
                        <polygon id="playerPolygon" class="radar-polygon" points="" />
                        <g id="radarPoints"></g>
                        
                        <text x="50" y="8" class="radar-label" text-anchor="middle">ê·¼ë ¥</text>
                        <text x="50" y="17" class="radar-value" text-anchor="middle" id="valStr">0</text>
                        
                        <text x="85" y="82" class="radar-label" text-anchor="start">ì§€ëŠ¥</text>
                        <text x="85" y="91" class="radar-value" text-anchor="start" id="valInt">0</text>
                        
                        <text x="15" y="82" class="radar-label" text-anchor="end">ë¯¼ì²©</text>
                        <text x="15" y="91" class="radar-value" text-anchor="end" id="valAgi">0</text>
                    </svg>
                </div>
                
                <div style="margin-top: 20px;">
                    <div class="stat-info"><span>ê·¼ë ¥ (ì›¨ì´íŠ¸/ëŸ¬ë‹)</span><span style="color:var(--neon-blue)" id="barValStr">0</span></div>
                    <div class="progress-bg"><div class="progress-fill" id="barFillStr"></div></div>
                    
                    <div class="stat-info"><span>ì§€ëŠ¥ (ì² í•™/ë…ì„œ)</span><span style="color:var(--neon-blue)" id="barValInt">0</span></div>
                    <div class="progress-bg"><div class="progress-fill" id="barFillInt"></div></div>
                    
                    <div class="stat-info"><span>ë¯¼ì²© (ìˆœë°œë ¥/ìœ ì‚°ì†Œ)</span><span style="color:var(--neon-blue)" id="barValAgi">0</span></div>
                    <div class="progress-bg"><div class="progress-fill" id="barFillAgi"></div></div>
                </div>
            </div>
        </section>

        <section id="quests" class="view-section">
            <h2>Daily Quests</h2>
            <div class="system-card">
                <div class="quest-row">
                    <div>
                        <div style="font-size:0.95rem; font-weight:bold; margin-bottom:3px;">ğŸƒ í•œê³„ë¥¼ ë„˜ëŠ” ì</div>
                        <div style="font-size:0.75rem; color:var(--text-sub)">10km ëŸ¬ë‹ ì™„ë£Œí•˜ê¸° (ë§ˆë¼í†¤ í›ˆë ¨)</div>
                    </div>
                    <span class="quest-status">ì§„í–‰ì¤‘</span>
                </div>
                <div class="quest-row">
                    <div>
                        <div style="font-size:0.95rem; font-weight:bold; margin-bottom:3px;">ğŸ‹ï¸ ê·¼ìœ¡ì€ ë°°ì‹ í•˜ì§€ ì•ŠëŠ”ë‹¤</div>
                        <div style="font-size:0.75rem; color:var(--text-sub)">ìŠ¤ì¿¼íŠ¸ 100íšŒ ì¸ì¦</div>
                    </div>
                    <span class="quest-status">ì§„í–‰ì¤‘</span>
                </div>
                <div class="quest-row done">
                    <div>
                        <div style="font-size:0.95rem; font-weight:bold; margin-bottom:3px; text-decoration:line-through;">ğŸ“– ì§€ì‹ì˜ íƒêµ¬ì</div>
                        <div style="font-size:0.75rem; color:var(--text-sub)">ì‹¤ì¡´ì£¼ì˜ ì² í•™ì„œ 30í˜ì´ì§€ ì™„ë…</div>
                    </div>
                    <span class="quest-status">ì™„ë£Œ</span>
                </div>
            </div>
        </section>

        <section id="dungeon" class="view-section">
            <h2>Local Raid</h2>
            <div class="system-card dungeon-banner">
                <h3 style="color: var(--neon-red); margin: 0 0 10px 0; font-size:1.2rem;">âš ï¸ ê´‘ì£¼ ë¶êµ¬ ì—°í•© ë³´ìŠ¤ ì¶œí˜„</h3>
                <p style="font-size: 0.85rem; color: var(--text-main); margin-bottom: 5px;">"ê²Œìœ¼ë¦„ì˜ í¬ì‹ì"ê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <p style="font-size: 0.75rem; color: var(--text-sub);">ê·¼ì²˜ì˜ í—Œí„°ë“¤ê³¼ ì—°í•©í•˜ì—¬ 2ì‹œê°„ ë‚´<br>í•©ì‚° 50kmë¥¼ ë‹¬ì„±í•˜ê³  ì „ë¦¬í’ˆì„ íšë“í•˜ì„¸ìš”.</p>
                <div style="font-size: 0.8rem; margin: 15px 0; font-weight:bold;">í˜„ì¬ ì°¸ì—¬ ì¸ì›: <span style="color:var(--neon-blue)">4</span> / 10 ëª…</div>
                <button class="btn-primary" style="background: var(--neon-red);">ë ˆì´ë“œ ì…ì¥í•˜ê¸°</button>
            </div>
        </section>

        <section id="social" class="view-section">
            <div class="social-header">
                <button class="social-tab-btn active" onclick="toggleSocialMode('global', this)">ğŸ† ê¸€ë¡œë²Œ ë­í‚¹</button>
                <button class="social-tab-btn" onclick="toggleSocialMode('friends', this)">ğŸ‘¥ ë‚´ ì¹œêµ¬</button>
            </div>

            <div id="ranking-controls" class="rank-tabs">
                <button class="rank-tab-btn active" onclick="renderUsers('total', this)">ì „ì²´í•©ê³„</button>
                <button class="rank-tab-btn" onclick="renderUsers('str', this)">ê·¼ë ¥ìˆœ</button>
                <button class="rank-tab-btn" onclick="renderUsers('int', this)">ì§€ëŠ¥ìˆœ</button>
                <button class="rank-tab-btn" onclick="renderUsers('agi', this)">ë¯¼ì²©ìˆœ</button>
            </div>

            <div class="user-list" id="user-list-container">
                </div>
        </section>

        <section id="settings" class="view-section">
            <h2>System Settings</h2>
            <div class="system-card">
                <div class="setting-row">
                    <span>ë¼ì´íŠ¸ ëª¨ë“œ (Light Theme)</span>
                    <label class="switch"><input type="checkbox" id="theme-toggle" onchange="changeTheme()"><span class="slider"></span></label>
                </div>
                <div class="setting-row">
                    <span>í‘¸ì‹œ ì•Œë¦¼ ìˆ˜ì‹ </span>
                    <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
                </div>
            </div>
            
            <div class="system-card">
                <div class="setting-row">
                    <span>ì‚¼ì„± í—¬ìŠ¤ / ê±´ê°• ì•± ë™ê¸°í™”</span>
                    <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
                </div>
                <div class="setting-row">
                    <span>ì¹´ì¹´ì˜¤ë§µ ìœ„ì¹˜ ê¸°ë°˜ ë˜ì „ í—ˆìš©</span>
                    <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
                </div>
            </div>
            
            <button class="btn-primary" style="background: #222; border: 1px solid var(--border-color); color: var(--neon-red);">ë¡œê·¸ì•„ì›ƒ</button>
        </section>
    </main>

    <nav>
        <div class="nav-item active" onclick="switchTab('status', this)">
            <span class="nav-icon">ğŸ‘¤</span><span>ìƒíƒœì°½</span>
        </div>
        <div class="nav-item" onclick="switchTab('quests', this)">
            <span class="nav-icon">ğŸ“œ</span><span>í€˜ìŠ¤íŠ¸</span>
        </div>
        <div class="nav-item" onclick="switchTab('dungeon', this)">
            <span class="nav-icon">âš”ï¸</span><span>ë˜ì „</span>
        </div>
        <div class="nav-item" onclick="switchTab('social', this)">
            <span class="nav-icon">ğŸ†</span><span>ì†Œì…œ</span>
        </div>
        <div class="nav-item" onclick="switchTab('settings', this)">
            <span class="nav-icon">âš™ï¸</span><span>ì„¤ì •</span>
        </div>
    </nav>

    <script>
        // 1. íƒ­ ì „í™˜
        function switchTab(tabId, el) {
            document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            el.classList.add('active');
            
            // íƒ­ í™œì„±í™” ì‹œ ë Œë”ë§ ì´ˆê¸°í™”
            if(tabId === 'social') renderUsers(currentSortCriteria);
            if(tabId === 'status') drawRadarChart(); // ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹¤í–‰
        }

        // 2. í…Œë§ˆ & í”„ë¡œí•„ ì—…ë¡œë“œ
        function changeTheme() {
            const isLight = document.getElementById('theme-toggle').checked;
            document.documentElement.setAttribute('data-theme', isLight ? 'light' : '');
            document.getElementById('sys-title').innerText = isLight ? "LEVEL UP: LIGHT" : "LEVEL UP: REBOOT";
        }

        function loadProfileImage(event) {
            const output = document.getElementById('profilePreview');
            if (event.target.files[0]) output.src = URL.createObjectURL(event.target.files[0]);
        }

        // 3. ë‹¤ì´ë‚´ë¯¹ ë ˆì´ë” ì°¨íŠ¸ (ìˆœìˆ˜ í•œê¸€ ì ìš©)
        const myStats = { str: 82, int: 67, agi: 45 }; // ì‹¤ì œ ìŠ¤íƒ¯ ê°’

        function drawRadarChart() {
            const centerX = 50, centerY = 50, radius = 35;
            // ìƒ(ê·¼ë ¥), ìš°í•˜(ì§€ëŠ¥), ì¢Œí•˜(ë¯¼ì²©) ì¢Œí‘œê³„
            const angles = [-Math.PI / 2, -Math.PI / 2 + (2 * Math.PI / 3), -Math.PI / 2 + (4 * Math.PI / 3)];

            // ë°°ê²½ ê±°ë¯¸ì¤„ ë° ì¶• ê·¸ë¦¬ê¸°
            const gridGroup = document.getElementById('radarGrid');
            const axesGroup = document.getElementById('radarAxes');
            gridGroup.innerHTML = ''; axesGroup.innerHTML = '';
            
            for (let level = 1; level <= 5; level++) {
                const r = radius * (level / 5);
                let points = "";
                for (let i = 0; i < 3; i++) {
                    const x = centerX + r * Math.cos(angles[i]);
                    const y = centerY + r * Math.sin(angles[i]);
                    points += `${x},${y} `;
                }
                const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                polygon.setAttribute('points', points.trim());
                polygon.setAttribute('class', 'radar-bg-line');
                gridGroup.appendChild(polygon);
            }

            for (let i = 0; i < 3; i++) {
                const x = centerX + radius * Math.cos(angles[i]);
                const y = centerY + radius * Math.sin(angles[i]);
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', centerX); line.setAttribute('y1', centerY);
                line.setAttribute('x2', x); line.setAttribute('y2', y);
                line.setAttribute('class', 'radar-bg-line');
                axesGroup.appendChild(line);
            }

            // ì‹¤ì œ ë°ì´í„° ë°”ì¸ë”©
            const dataValues = [myStats.str, myStats.int, myStats.agi];
            let dataPoints = "";
            const pointsGroup = document.getElementById('radarPoints');
            pointsGroup.innerHTML = '';

            for (let i = 0; i < 3; i++) {
                const r = radius * (dataValues[i] / 100);
                const x = centerX + r * Math.cos(angles[i]);
                const y = centerY + r * Math.sin(angles[i]);
                dataPoints += `${x},${y} `;

                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', x); circle.setAttribute('cy', y);
                circle.setAttribute('r', '1.5');
                circle.setAttribute('class', 'radar-point');
                pointsGroup.appendChild(circle);
            }

            // í´ë¦¬ê³¤ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
            const playerPolygon = document.getElementById('playerPolygon');
            playerPolygon.setAttribute('points', "50,50 50,50 50,50"); // ì‹œì‘ì 
            setTimeout(() => { playerPolygon.setAttribute('points', dataPoints.trim()); }, 50);

            // í…ìŠ¤íŠ¸ ë° ë°” ê·¸ë˜í”„ ìˆ˜ì¹˜ ì—°ë™
            document.getElementById('valStr').textContent = myStats.str;
            document.getElementById('valInt').textContent = myStats.int;
            document.getElementById('valAgi').textContent = myStats.agi;
            
            document.getElementById('barValStr').textContent = myStats.str;
            document.getElementById('barValInt').textContent = myStats.int;
            document.getElementById('barValAgi').textContent = myStats.agi;

            // ë°” ê·¸ë˜í”„ ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => {
                document.getElementById('barFillStr').style.width = `${myStats.str}%`;
                document.getElementById('barFillInt').style.width = `${myStats.int}%`;
                document.getElementById('barFillAgi').style.width = `${myStats.agi}%`;
            }, 100);

            // ì¢…í•© ìŠ¤ì½”ì–´
            document.getElementById('totalScore').innerHTML = `${myStats.str + myStats.int + myStats.agi} <span style="font-size: 1rem; color: var(--neon-gold);">pts</span>`;
        }

        // 4. ì†Œì…œ ë°ì´í„° & ë­í‚¹ ê¸°ëŠ¥
        let currentSocialMode = 'global'; 
        let currentSortCriteria = 'total';

        const userData = [
            { id: 1, name: "ê´‘ì£¼_ë§ˆë¼í† ë„ˆ", title: "ë¬´ë“±ì‚° í˜¸ë‘ì´", str: 95, int: 50, agi: 90, total: 235, isMe: false, isFriend: false },
            { id: 2, name: "ê¹Œë®ˆ_ë¦¬ë”", title: "ì‹¤ì¡´ì£¼ì˜ì", str: 30, int: 98, agi: 40, total: 168, isMe: false, isFriend: true },
            { id: 3, name: "í”Œë ˆì´ì–´ (ë‚˜)", title: "ì² í•™í•˜ëŠ” ë§ˆë¼í† ë„ˆ", str: myStats.str, int: myStats.int, agi: myStats.agi, total: myStats.str+myStats.int+myStats.agi, isMe: true, isFriend: false },
            { id: 4, name: "ê°•ë‚¨ë°”ë²¨íƒ‘", title: "êµ­ê°€ê¶Œë ¥ê¸‰ ê·¼ë ¥", str: 99, int: 40, agi: 50, total: 189, isMe: false, isFriend: false },
            { id: 5, name: "ì¡°ìš©í•œê°œë°œì", title: "ê·¸ë¦¼ì ë³‘ì‚¬", str: 40, int: 85, agi: 60, total: 185, isMe: false, isFriend: true }
        ];

        function toggleSocialMode(mode, btn) {
            currentSocialMode = mode;
            document.querySelectorAll('.social-tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('ranking-controls').style.display = mode === 'global' ? 'flex' : 'none';
            renderUsers(currentSortCriteria);
        }

        function renderUsers(criteria, btn = null) {
            if(btn) {
                currentSortCriteria = criteria;
                document.querySelectorAll('.rank-tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            }

            const container = document.getElementById('user-list-container');
            container.innerHTML = '';

            let displayUsers = [...userData];
            if(currentSocialMode === 'friends') displayUsers = displayUsers.filter(u => u.isFriend);
            displayUsers.sort((a, b) => b[criteria] - a[criteria]);

            if(displayUsers.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:20px; color:var(--text-sub);">ë“±ë¡ëœ ì¹œêµ¬ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            displayUsers.forEach((user, index) => {
                const card = document.createElement('div');
                card.className = `user-card ${user.isMe ? 'my-rank' : ''}`;
                const rankDisplay = currentSocialMode === 'global' ? `<div style="font-size:1.1rem; font-weight:bold; color:var(--text-sub); width:25px; text-align:center;">${index+1}</div>` : '';
                
                let friendBtnHtml = '';
                if(!user.isMe) {
                    friendBtnHtml = user.isFriend 
                        ? `<button class="btn-friend added" onclick="toggleFriend(${user.id})">ì¹œêµ¬ âœ“</button>` 
                        : `<button class="btn-friend" onclick="toggleFriend(${user.id})">ì¹œêµ¬ ì¶”ê°€</button>`;
                }

                card.innerHTML = `
                    ${rankDisplay}
                    <div class="user-info">
                        <div class="title-badge">${user.title}</div>
                        <div style="font-size: 0.95rem;">${user.name}</div>
                    </div>
                    <div class="user-score">${user[criteria]}</div>
                    ${friendBtnHtml}
                `;
                container.appendChild(card);
            });
        }

        function toggleFriend(userId) {
            const user = userData.find(u => u.id === userId);
            if(user) { user.isFriend = !user.isFriend; renderUsers(currentSortCriteria); }
        }

        // ì´ˆê¸° ì‹¤í–‰
        window.onload = () => {
            drawRadarChart();
            renderUsers('total');
        };
    </script>
</body>
</html>